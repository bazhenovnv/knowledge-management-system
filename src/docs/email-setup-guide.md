# Инструкция по настройке Email уведомлений

## Шаг 1: Настройка почтового сервиса

### Вариант 1: Gmail (рекомендуется)

1. **Включите двухфакторную аутентификацию**:
   - Перейдите: https://myaccount.google.com/security
   - Найдите раздел "Двухэтапная аутентификация"
   - Включите её

2. **Создайте пароль приложения**:
   - Перейдите: https://myaccount.google.com/apppasswords
   - Выберите "Почта" и "Другое устройство"
   - Введите название: "Система уведомлений"
   - Скопируйте сгенерированный пароль (16 символов)

3. **Добавьте секреты в проект**:
   - `SMTP_SERVER`: `smtp.gmail.com`
   - `SMTP_PORT`: `587`
   - `SMTP_USERNAME`: ваш Gmail адрес (например: `your-email@gmail.com`)
   - `SMTP_PASSWORD`: пароль приложения из шага 2
   - `FROM_EMAIL`: ваш Gmail адрес

### Вариант 2: Яндекс.Почта

1. **Создайте пароль приложения**:
   - Перейдите: https://passport.yandex.ru/profile
   - Раздел "Пароли и авторизация"
   - Создайте пароль приложения

2. **Добавьте секреты**:
   - `SMTP_SERVER`: `smtp.yandex.ru`
   - `SMTP_PORT`: `587`
   - `SMTP_USERNAME`: ваш email (например: `your-email@yandex.ru`)
   - `SMTP_PASSWORD`: пароль приложения
   - `FROM_EMAIL`: ваш email

### Вариант 3: Mail.ru

1. **Включите доступ для приложений**:
   - Настройки → Безопасность
   - Включите "Разрешить доступ сторонним приложениям"

2. **Добавьте секреты**:
   - `SMTP_SERVER`: `smtp.mail.ru`
   - `SMTP_PORT`: `587`
   - `SMTP_USERNAME`: ваш email (например: `your-email@mail.ru`)
   - `SMTP_PASSWORD`: пароль от почты
   - `FROM_EMAIL`: ваш email

## Шаг 2: Добавление секретов в проект

1. Откройте настройки проекта в poehali.dev
2. Перейдите в раздел "Секреты"
3. Добавьте все 5 секретов:
   - SMTP_SERVER
   - SMTP_PORT
   - SMTP_USERNAME
   - SMTP_PASSWORD
   - FROM_EMAIL

## Шаг 3: Проверка работы

1. Зайдите в **Настройки → Уведомления**
2. Включите "Email уведомления"
3. Нажмите "Создать тестовые уведомления" в разделе "Тема"
4. Проверьте почту - должно прийти уведомление

## Устранение проблем

### Ошибка "SMTP credentials not configured"
- Проверьте, что все 5 секретов добавлены
- Убедитесь, что названия секретов написаны правильно

### Ошибка "Authentication failed"
- Gmail: убедитесь, что используете пароль приложения, а не пароль аккаунта
- Яндекс/Mail.ru: проверьте правильность логина и пароля
- Проверьте, включена ли двухфакторная аутентификация

### Письма не приходят
- Проверьте папку "Спам"
- Убедитесь, что FROM_EMAIL совпадает с SMTP_USERNAME
- Проверьте лимиты отправки (Gmail: 500 писем/день)

### Ошибка подключения
- Проверьте SMTP_PORT (обычно 587 для TLS)
- Убедитесь, что сервер доступен
- Проверьте настройки файрвола

## Безопасность

⚠️ **Важно**:
- Никогда не храните пароли в коде
- Используйте только пароли приложений (не основной пароль)
- Регулярно меняйте пароли приложений
- Не передавайте секреты третьим лицам

## Лимиты отправки

- **Gmail**: 500 писем в день
- **Яндекс**: 500 писем в день  
- **Mail.ru**: 300 писем в день

Для больших объёмов рассылки рекомендуется использовать специализированные сервисы:
- SendGrid
- Mailgun
- AWS SES
- Postmark
