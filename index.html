<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—É—á–µ–Ω–∏–µ–º</title>
  <script>
    // Redirect to HTTPS www version
    if (window.location.hostname === 'ab-education.ru' || 
        (window.location.hostname === 'www.ab-education.ru' && window.location.protocol !== 'https:')) {
      window.location.href = 'https://www.ab-education.ru' + window.location.pathname + window.location.search + window.location.hash;
    }
    
    // Force cache bust - –¥–æ–±–∞–≤–ª—è–µ–º –≤–µ—Ä—Å–∏—é –∫ URL
    const APP_VERSION = '2.0.0';
    const savedVersion = localStorage.getItem('app_version');
    
    if (savedVersion !== APP_VERSION) {
      console.log('üîÑ –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –æ—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞...');
      localStorage.setItem('app_version', APP_VERSION);
      
      // –û—á–∏—â–∞–µ–º service workers –µ—Å–ª–∏ –µ—Å—Ç—å
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.getRegistrations().then(function(registrations) {
          for(let registration of registrations) {
            registration.unregister();
          }
        });
      }
      
      // –û—á–∏—â–∞–µ–º cache storage
      if ('caches' in window) {
        caches.keys().then(function(names) {
          for (let name of names) caches.delete(name);
        });
      }
    }
  </script>
  
    <meta name="pp-name" value="knowledge-management-system">
      <script src="https://cdn.poehali.dev/intertnal/js/pp-min-2.js"></script>
      <script src="https://cdn.poehali.dev/intertnal/js/route-min.js"></script>
      <script src="https://cdn.poehali.dev/intertnal/js/inspector-min.js"></script>
      <script src="https://cdn.poehali.dev/intertnal/js/telemetry-min.js"></script>
  <style>
    #app-loader {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #0a0a0a;
      z-index: 9999;
    }
    .loader-spinner {
      width: 48px;
      height: 48px;
      border: 3px solid rgba(255,255,255,0.1);
      border-top-color: #fff;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
  </head>
<body>
<div id="root">
  <div id="app-loader">
    <div class="loader-spinner"></div>
  </div>
</div>
<script type="module" src="/src/main.tsx"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function (m, e, t, r, i, k, a) {
        m[i] = m[i] || function () {
            (m[i].a = m[i].a || []).push(arguments)
        };
        m[i].l = 1 * new Date();
        for (var j = 0; j < document.scripts.length; j++) {
            if (document.scripts[j].src === r) {
                return;
            }
        }
        k = e.createElement(t), a = e.getElementsByTagName(t)[0], k.async = 1, k.src = r, a.parentNode.insertBefore(k, a)
    })
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(101026698, "init", {
        trustedDomains: ["poehali.dev", "ab-education.ru"],
        clickmap: true,
        trackLinks: true,
        accurateTrackBounce: true,
        webvisor: true,
        trackHash: true
    });
</script>
<noscript>
    <div><img src="https://mc.yandex.ru/watch/101026698" style="position:absolute; left:-9999px;" alt=""/></div>
</noscript>
<!-- /Yandex.Metrika counter -->
</body>
</html>